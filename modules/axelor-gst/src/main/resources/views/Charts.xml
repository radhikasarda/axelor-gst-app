<?xml version="1.0" encoding="UTF-8"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_5.1.xsd">

	<chart onInit="action.invoice.chart.set.date" name="chart.unpaid.invoices.per.customer" title="Unpaid Invoices per customer" >
	  <search-fields>
	    <field name="fromDate" type="date" title="From Date" x-required="true"/>
	    <field name="toDate" type="date" title="To Date" x-required="true" />
	  </search-fields>
		<dataset type="sql">
    <![CDATA[
      select count(*) as count,party.name as name
      from gst_invoice as invoice 
      left join gst_party as party 
      on invoice.party=party.id 
      where invoice.status in('draft','validated')
      AND DATE(invoice.created_on) BETWEEN DATE(:fromDate) AND DATE(:toDate)
      AND party.customer  
      group by party.name 
    ]]>
    </dataset>
<!-- 		<category key="count" type="number" />
		<series key="name" groupBy="name" type="bar" /> -->
		<category key="name" type="text" />
		<series key="count" groupBy="name" type="bar" />
	</chart>

<action-record model="com.axelor.axelor.gst.db.Invoice" name="action.invoice.chart.set.date">
	  <field name="toDate" expr="eval:__date__"/>
	  <field name="fromDate" expr="eval:__date__.withDayOfMonth(1)"/>
</action-record>


</object-views>